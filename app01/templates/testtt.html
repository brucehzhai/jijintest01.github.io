<!DOCTYPE html>
<html>
<head>
    <title>可拖动的弹出窗口</title>
    <style>
        /* 弹出窗口的基本样式 */
        .draggable {
            width: 300px;
            height: 200px;
            position: absolute;
            top: 50px;
            left: 50px;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            z-index: 1000;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* 窗口顶部的拖动把手 */
        .header {
            padding: 10px;
            cursor: move;
            background-color: #4CAF50;
            color: #fff;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }
    </style>
</head>
<body>

<!-- 弹出窗口 -->
<div class="draggable" id="mydiv">
    <div class="header" id="mydivheader">点击这里拖动</div>
    <p>这是一个可拖动的弹出窗口。</p>
</div>

<script>
// JavaScript 实现窗口拖动功能
dragElement(document.getElementById("mydiv"));

function dragElement(elmnt) {
    var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
    if (document.getElementById(elmnt.id + "header")) {
        // 如果存在header，则在header上添加拖动事件
        document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
    } else {
        // 否则，在整个元素上添加拖动事件
        elmnt.onmousedown = dragMouseDown;
    }

    function dragMouseDown(e) {
        e = e || window.event;
        e.preventDefault();
        // 获取鼠标光标开始位置
        pos3 = e.clientX;
        pos4 = e.clientY;
        document.onmouseup = closeDragElement;
        // 当鼠标移动时调用元素移动函数
        document.onmousemove = elementDrag;
    }

    function elementDrag(e) {
        e = e || window.event;
        e.preventDefault();
        // 计算鼠标移动距离
        pos1 = pos3 - e.clientX;
        pos2 = pos4 - e.clientY;
        pos3 = e.clientX;
        pos4 = e.clientY;
        // 设置元素新位置
        elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
        elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
    }

    function closeDragElement() {
        // 停止移动时解除绑定事件
        document.onmouseup = null;
        document.onmousemove = null;
    }
}
</script>

</body>
</html>
