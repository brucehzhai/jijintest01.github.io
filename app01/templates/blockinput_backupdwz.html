<html lang="en">

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Login</title>
    <!-- favicons Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="../static/images/favicons/apple-touch-icon.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="../static/images/favicons/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="../static/images/favicons/favicon-16x16.png"/>
    <link rel="manifest" href="../static/images/favicons/site.webmanifest"/>
    <meta name="description" content="Crsine HTML Template For Car Services"/>

    <!-- fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
            href="https://fonts.googleapis.com/css2?family=Averia+Sans+Libre:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&family=Shadows+Into+Light&display=swap"
            rel="stylesheet">

    <link rel="stylesheet" href="../static/plugins/fontawesome-free-6.5.1-web/css/fontawesome.min.css"/>

    <link rel="stylesheet" href="../static/plugins/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../static/plugins/animate/animate.min.css"/>
    <link rel="stylesheet" href="../static/plugins/animate/custom-animate.css"/>
    <link rel="stylesheet" href="../static/plugins/fontawesome/css/all.min.css"/>
    <link rel="stylesheet" href="../static/plugins/jarallax/jarallax.css"/>
    <link rel="stylesheet" href="../static/plugins/jquery-magnific-popup/jquery.magnific-popup.css"/>
    <link rel="stylesheet" href="../static/plugins/nouislider/nouislider.min.css"/>
    <link rel="stylesheet" href="../static/plugins/nouislider/nouislider.pips.css"/>
    <link rel="stylesheet" href="../static/plugins/odometer/odometer.min.css"/>
    <link rel="stylesheet" href="../static/plugins/swiper/swiper.min.css"/>
    <link rel="stylesheet" href="../static/plugins/icomoon-icons/style.css">
    <link rel="stylesheet" href="../static/plugins/tiny-slider/tiny-slider.min.css"/>
    <link rel="stylesheet" href="../static/plugins/reey-font/stylesheet.css"/>
    <link rel="stylesheet" href="../static/plugins/owl-carousel/owl.carousel.min.css"/>
    <link rel="stylesheet" href="../static/plugins/owl-carousel/owl.theme.default.min.css"/>
    <link rel="stylesheet" href="../static/plugins/twentytwenty/twentytwenty.css"/>

    <!-- template styles -->
    <link rel="stylesheet" href="../static/css/agriox.css"/>
    <link rel="stylesheet" href="../static/css/agriox-responsive.css"/>
    <link rel="stylesheet" href="../static/css/city-picker.css"/>
    <link rel="stylesheet" href="../static/css/bootstrap-datetimepicker.min.css">


</head>

<body>

<section class="testimonials-one jarallax clearfix" data-jarallax data-speed="0.2" data-imgPosition="50% 0%">
    <div class="container">
        <div class="row">
            <!--Start Testimonials One Left-->
            <div class="col-xl-4">
                <div class="testimonials-one__left">
                    <div class="testimonials-one__left-bg"></div>
                    <div class="sec-title">
                        <span class="sec-title__tagline"></span>
                        <h2 class="sec-title__title">云南 - 楚雄<br> <br> 发 展 资 讯</h2>
                    </div>
                </div>
            </div>
            <!--End Testimonials One Left-->

            <!--Start Testimonials One Right-->
            <div class="col-xl-8">
                <div class="testimonials-one__right">
                    <div class="row">
                        <div class="col-xl-12">
                            <form action="">
                            <div class="testimonials-one__carousel owl-carousel owl-theme">
                                <!--Start Single Testimonials One-->
                                <div class="testimonials-one__single form-control">
                                    <h1>种植</h1>
                                    <div class="col-lg-5" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">商品码</label>
                                        <input type="text" id="commodityCode" name='commodityCode' class="form-control"
                                               placeholder="请输入商品码">
                                    </div>
                                    <div class="col-lg-5" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">品类</label>
                                        <select class="form-select" id="category">
                                            <option selected>请选择对应品类</option>
                                            <option value="1">茶树菇</option>
                                            <option value="2">牛肝菌</option>
                                            <option value="3">松茸</option>
                                            <option value="4">姬松茸</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-5" style="display: inline-block;margin-top: 10px">
                                        <label style="margin-top: 10px;margin-bottom: 5px">所属科目</label>
                                        <input type="text" id="subject" class="form-control" placeholder="请输入科目">
                                    </div>
                                    <div class="col-lg-5" style="display: inline-block;margin-top: 10px">
                                        <label style="margin-top: 10px;margin-bottom: 5px">所属门类</label>
                                        <input type="text" id="classmen" class="form-control" placeholder="请输入门类">
                                    </div>
                                    <div class=“col-lg-12”>
                                        <label style="margin-top: 10px;margin-bottom: 5px">所属地区</label>
                                        <div class="city-picker-selector" id="city-picker-selector">
                                            <div class="selector-item storey province">
                                                <a href="javascript:;" class="selector-name reveal">北京市</a>
                                                <input type="hidden" name="userProvinceId" class="input-price val-error"
                                                       value="110000" data-required="userProvinceId">
                                                <div class="selector-list listing hide">
                                                    <ul>
                                                        <li>北京市</li>
                                                        <li>天津市</li>
                                                        <li>河北省</li>
                                                        <li>山西省</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="selector-item storey city">
                                                <a href="javascript:;" class="selector-name reveal">北京市</a>
                                                <input type="hidden" name="userCityId" class="input-price val-error"
                                                       value="110100"
                                                       data-required="userCityId">
                                                <div class="selector-list listing hide">
                                                    <ul>
                                                        <li>北京市</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="selector-item storey district">
                                                <a href="javascript:;" class="selector-name reveal">海淀区</a>
                                                <input type="hidden" name="userDistrictId" class="input-price val-error"
                                                       value="110108" data-required="userDistrictId">
                                                <div class="selector-list listing hide">
                                                    <ul>
                                                        <li>东城区</li>
                                                        <li>西城区</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-lg-10">
                                        <label style="margin-top: 10px;margin-bottom: 5px">培育环境</label>
                                        <input type="text" id="growthEnvironment" class="form-control"
                                               placeholder="请描述其生长环境">
                                    </div>
                                    <div class="col-lg-10">
                                        <label style="margin-top: 10px;margin-bottom: 5px">生长周期</label>
                                        <select class="form-select" id="growthCycle">
                                            <option value="3">2~3周</option>
                                            <option value="4">3~4周</option>
                                            <option value="5">4~5周</option>
                                            <option value="6">5~6周</option>
                                            <option value="7">6~7周</option>
                                            <option value="8">7~8周</option>
                                            <option value="9">8~9周</option>
                                            <option value="10">9~10周</option>
                                            <option value="11">10~11周</option>
                                            <option value="12">11~12周</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-10">
                                        <label style="margin-top: 10px;margin-bottom: 5px">生长管理</label>
                                        <input type="text" id="growthManagement" class="form-control"
                                               placeholder="请输入生长管理方式">
                                    </div>
                                </div>
                                <!--Start Single Testimonials One-->

                                <!--Start Single Testimonials One-->
                                <div class="testimonials-one__single form-control">
                                    <h1>运输</h1>
                                    <div class="col-lg-3" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">采摘时间</label>
                                        <input type="text" class="form-control datetimepicker" id="cztime"
                                               placeholder="请输入采摘时间">
                                    </div>
                                    <div class="col-lg-3" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">采摘</label>
                                        <select class="form-select" id="harvestMethod">
                                            <option selected>勾选采摘方式</option>
                                            <option value="1">手工采摘</option>
                                            <option value="2">机械采摘</option>
                                            <option value="3">野外采集</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-4" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">存储方式</label>
                                        <select class="form-select" id="storageMethod">
                                            <option selected>勾选存储方式</option>
                                            <option value="1">低温冷藏</option>
                                            <option value="2">干燥保存</option>
                                            <option value="3">真空包装</option>
                                            <option value="4">新鲜保鲜</option>
                                        </select>
                                    </div>
                                    <div class=“col-lg-10”>
                                        <label style="margin-top: 10px;margin-bottom: 5px">起点</label>
                                        <div class="city-picker-selector" id="city-picker-selector-start">
                                            <div class="selector-item storey province">
                                                <a href="javascript:;" class="selector-name reveal">北京市</a>
                                                <input type="hidden" name="userProvinceId" class="input-price val-error"
                                                       value="110000" data-required="userProvinceId">
                                                <div class="selector-list listing hide">
                                                    <ul>
                                                        <li>北京市</li>
                                                        <li>天津市</li>
                                                        <li>河北省</li>
                                                        <li>山西省</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="selector-item storey city">
                                                <a href="javascript:;" class="selector-name reveal">北京市</a>
                                                <input type="hidden" name="userCityId" class="input-price val-error"
                                                       value="110100"
                                                       data-required="userCityId">
                                                <div class="selector-list listing hide">
                                                    <ul>
                                                        <li>北京市</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="selector-item storey district">
                                                <a href="javascript:;" class="selector-name reveal">海淀区</a>
                                                <input type="hidden" name="userDistrictId" class="input-price val-error"
                                                       value="110108" data-required="userDistrictId">
                                                <div class="selector-list listing hide">
                                                    <ul>
                                                        <li>东城区</li>
                                                        <li>西城区</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class=“col-lg-10”>
                                        <label style="margin-top: 10px;margin-bottom: 5px">终点</label>
                                        <div class="city-picker-selector" id="city-picker-selector-end">
                                            <div class="selector-item storey province">
                                                <a href="javascript:;" class="selector-name reveal">北京市</a>
                                                <input type="hidden" name="userProvinceId" class="input-price val-error"
                                                       value="110000" data-required="userProvinceId">
                                                <div class="selector-list listing hide">
                                                    <ul>
                                                        <li>北京市</li>
                                                        <li>天津市</li>
                                                        <li>河北省</li>
                                                        <li>山西省</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="selector-item storey city">
                                                <a href="javascript:;" class="selector-name reveal">北京市</a>
                                                <input type="text" name="userCityId" id="hidden"
                                                       class="input-price val-error"
                                                       value="110100" data-required="userCityId">
                                                <div class="selector-list listing hide">
                                                    <ul>
                                                        <li>北京市</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="selector-item storey district">
                                                <a href="javascript:;" class="selector-name reveal">海淀区</a>
                                                <input type="hidden" name="userDistrictId" class="input-price val-error"
                                                       value="110108" data-required="userDistrictId">
                                                <div class="selector-list listing hide">
                                                    <ul>
                                                        <li>东城区</li>
                                                        <li>西城区</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-5" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">运输距离</label>
                                        <input type="text" id="transportDistance" class="form-control"
                                               placeholder="请输入运输路程(Km)">
                                    </div>
                                    <div class="col-lg-5" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">运输工具</label>
                                        <select class="form-select" id="transportTool">
                                            <option selected>请选择运输工具</option>
                                            <option value="1">冷藏车</option>
                                            <option value="2">普通车辆</option>
                                            <option value="3">空运</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-5" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">开始时间</label>
                                        <input type="text" id="kstime" class="form-control"
                                               placeholder="请输入运输开始时间">
                                    </div>
                                    <div class="col-lg-5" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">结束时间</label>
                                        <input type="text" id="jstime" class="form-control"
                                               placeholder="请输入运输结束时间">
                                    </div>
                                    <div class="col-lg-5" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">保鲜时间</label>
                                        <input type="text" id="bxtime" class="form-control"
                                               placeholder="请输入保鲜时间">
                                    </div>
                                    <div class="col-lg-5" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">销售方式</label>
                                        <select class="form-select" id="salesMethod">
                                            <option selected>请选择销售方式</option>
                                            <option value="1">线下销售</option>
                                            <option value="2">电商平台</option>
                                            <option value="3">农贸市场</option>
                                        </select>
                                    </div>
                                </div>
                                <!--Start Single Testimonials One-->

                                <!--Start Single Testimonials One-->
                                <div class="testimonials-one__single form-control">
                                    <h1>加工</h1>
                                    <div class="col-lg-5" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">加工方式</label>
                                        <input type="text" class="form-control" id="processingMethod"
                                               placeholder="请输入加工方式">
                                    </div>
                                    <div class="col-lg-5" style="display: inline-block">
                                        <label style="margin-top: 10px;margin-bottom: 5px">上架时间</label>
                                        <input type="text" class="form-control" id="sjtime"
                                               placeholder="请输入上架时间">
                                    </div>
                                    <div class=“col-lg-10”>
                                        <label style="margin-top: 10px;margin-bottom: 5px">上架区域</label>
                                        <div class="city-picker-selector" id="city-picker-selector-area">
                                            <div class="selector-item storey province">
                                                <a href="javascript:;" class="selector-name reveal">北京市</a>
                                                <input type="hidden" name="userProvinceId" class="input-price val-error"
                                                       value="110000" data-required="userProvinceId">
                                                <div class="selector-list listing hide">
                                                    <ul>
                                                        <li>北京市</li>
                                                        <li>天津市</li>
                                                        <li>河北省</li>
                                                        <li>山西省</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="selector-item storey city">
                                                <a href="javascript:;" class="selector-name reveal">北京市</a>
                                                <input type="hidden" name="userCityId" class="input-price val-error"
                                                       value="110100"
                                                       data-required="userCityId">
                                                <div class="selector-list listing hide">
                                                    <ul>
                                                        <li>北京市</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="selector-item storey district">
                                                <a href="javascript:;" class="selector-name reveal">海淀区</a>
                                                <input type="hidden" name="userDistrictId" class="input-price val-error"
                                                       value="110108" data-required="userDistrictId">
                                                <div class="selector-list listing hide">
                                                    <ul>
                                                        <li>东城区</li>
                                                        <li>西城区</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-10">
                                        <label style="margin-top: 10px;margin-bottom: 5px">菜品名</label>
                                        <input type="text" class="form-control" id="dishName"
                                               placeholder="请输入对应菜品">
                                    </div>
                                    <button type="button" class="btn btn-primary btn-lg btn-block" style="margin-top: 20px;"
                        onclick="getInfo()">提交</button>
                        <button type="button" class="btn btn-secondary btn-lg btn-block" style="margin-top: 20px;"
                        onclick="redirectToBlockVisual();">跳转</button>
                                </div>
                                <!--Start Single Testimonials One-->

                                <!--Start Single Testimonials One-->

                                <!--Start Single Testimonials One-->

                            </div>
                        </form>
                        </div>
                    </div>
                </div>
            </div>
            <!--End Testimonials One Right-->
        </div>
    </div>
</section>

<script src="../static/js/web3.min.js"></script>
<script src="../static/js/jquery.min.js"></script>
<script>
        function redirectToBlockVisual() {
            window.location.href = '../blockvisual/';
        }




        const web3 = new Web3(new Web3.providers.HttpProvider("https://sepolia.infura.io/v3/19225cd3ce7a4ad6972475b102adfdb4"));
        const abi = [
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "commodityCode",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "category",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "subject",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "class",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "growthEnvironment",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "growthCycle",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "growthManagement",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "harvestTime",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "harvestMethod",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "storageMethod",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "transportDistance",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "transportTool",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "transportStartTime",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "transportEndTime",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "preservationTime",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "salesMethod",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "processingMethod",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "shelfTime",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "dishName",
                        "type": "string"
                    }
                ],
                "name": "addPlanting",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "",
                        "type": "string"
                    }
                ],
                "name": "foodInfos",
                "outputs": [
                    {
                        "internalType": "string",
                        "name": "commodityCode",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "category",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "subject",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "class",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "region",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "growthEnvironment",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "growthCycle",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "growthManagement",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "harvestTime",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "harvestMethod",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "storageMethod",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "startPoint",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "endPoint",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "transportDistance",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "transportTool",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "transportStartTime",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "transportEndTime",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "preservationTime",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "salesMethod",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "processingMethod",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "shelfTime",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "shelfArea",
                        "type": "string"
                    },
                    {
                        "internalType": "string",
                        "name": "dishName",
                        "type": "string"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "commodityCode",
                        "type": "string"
                    }
                ],
                "name": "retrieve",
                "outputs": [
                    {
                        "components": [
                            {
                                "internalType": "string",
                                "name": "commodityCode",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "category",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "subject",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "class",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "region",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "growthEnvironment",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "growthCycle",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "growthManagement",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "harvestTime",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "harvestMethod",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "storageMethod",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "startPoint",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "endPoint",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "transportDistance",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "transportTool",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "transportStartTime",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "transportEndTime",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "preservationTime",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "salesMethod",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "processingMethod",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "shelfTime",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "shelfArea",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "dishName",
                                "type": "string"
                            }
                        ],
                        "internalType": "struct FoodTraceability.FoodInfo",
                        "name": "",
                        "type": "tuple"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            }
        ];

        const address = '0x877D1E76FAD0EA72263583C147CE8f92f4BF27F5';
        const contractInstance = new web3.eth.Contract(abi, address);

        /* // to test if initialized web3 works fine
         web3.eth.getBlockNumber().then((results) => {
             console.log("***Current Block Number***:")
             console.log(results)
         });
 
         // to test if web3.eth.Contract works
         console.log("***contractInstance.abi***:");
         console.log(contractInstance.options.jsonInterface);*/



        contractInstance.methods.retrieve('222').call().then(function (result) {
            console.log(result); // Log the result to the console

            // Create a mapping from English to Chinese
            let mapping = {
                'commodityCode': '商品代码',
                'category': '类别',
                'subject': '主题',
                'classmen': '班级',
                'region': '区域',
                'growthEnvironment': '生长环境',
                'growthCycle': '生长周期',
                'growthManagement': '生长管理',
                'harvestTime': '收获时间',
                'harvestMethod': '收获方法',
                'storageMethod': '存储方法',
                'startPoint': '起点',
                'endPoint': '终点',
                'transportDistance': '运输距离',
                'transportTool': '运输工具',
                'transportStartTime': '运输开始时间',
                'transportEndTime': '运输结束时间',
                'preservationTime': '保鲜时间',
                'salesMethod': '销售方式',
                'processingMethod': '加工方式',
                'shelfTime': '上架时间',
                'shelfArea': '上架区域',
                'dishName': '菜品名称'
            };

            // Create an HTML string
            let html = '<ul>';
            for (let key in result) {
                if (result.hasOwnProperty(key) && isNaN(key)) { // Ignore numeric keys and __length__
                    let chineseKey = mapping[key] || key; // Use the Chinese key if it exists, otherwise use the English key
                    html += `<li>${chineseKey}: ${result[key]}</li>`;
                }
            }
            html += '</ul>';

            $("#demo").html(html); // Display the formatted result
        });


        /*contractInstance.methods.retrieve('111').call().then(function (result) {
            console.log(result); // Log the result to the console
            $("#demo").html(JSON.stringify(result)); // Convert the result to a string before displaying it*/

        // Create a mapping from English to Chinese
        /*let mapping = {
            'commodityCode': '商品码',
            'category': '品类'
        };

        // Create an HTML string
        let html = '<ul>';
        for (let key in mapping) { // Only loop over the keys in the mapping
            if (result.hasOwnProperty(key)) {
                let chineseKey = mapping[key];
                html += `<li>${chineseKey}: ${result[key]}</li>`;
            }
        }
        html += '</ul>';

        $("#demo").html(html); // Display the formatted result*/









        // Create a mapping from English to Chinese
        /*let mapping = {
            'commodityCode': '商品码',
            'category': '品类',
            'subject': '所属科目',
            'class': '所属门类',
            'growthEnvironment': '培育环境',
            'growthCycle': '生长周期',
            'growthManagement': '生长管理',
            'region': '地区'
        };

        // Create an HTML string
        let html = '<ul>';
        for (let key in result) {
            if (result.hasOwnProperty(key) && isNaN(key)) { // Ignore numeric keys and __length__
                let chineseKey = mapping[key] || key; // Use the Chinese key if it exists, otherwise use the English key
                html += `<li>${chineseKey}: ${result[key]}</li>`;
            }
        }
        html += '</ul>';

        $("#demo").html(html); // Display the formatted result
    })*/





        /*contractInstance.methods.retrieve('111').call().then((result) => {
            console.log("***retrievetext()***:");
            console.log(result);
        });
        contractInstance.methods.retrieve('111').call().then(function (result) {
            console.log(result); // Log the result to the console

            // Create an HTML string
            let html = '<ul>';
            for (let key in result) {
                if (result.hasOwnProperty(key) && isNaN(key)) { // Ignore numeric keys and __length__
                    html += `<li>${key}: ${result[key]}</li>`;
                }
            }
            html += '</ul>';

            $("#demo").html(html); // Display the formatted result
        })*/




        /*contractInstance.methods.retrieve('111').call().then(function (result) {
            console.log(result); // Log the result to the console
            $("#demo").html(JSON.stringify(result)); // Convert the result to a string before displaying it
        })*/
        /*contractInstance.methods.retrieve('111').call().then(function (result) {
            $("#demo").html(result);
        })*/





        function getInfo() {


            $.ajax({
                url: '/increment_code/',
                method: 'POST',
                data: {
                    'commodityCode': $('#commodityCode').val()
                },

                success: function (data) {
                    if (data.status === 'success') {
                        alert('Code incremented to ' + data.new_code);
                        console.log('Data code:', data.new_code);
                    } else {
                        alert('Error: ' + data.error);
                    }
                }
            });


            $.ajax({
                url: '{% url "get_codes" %}',
                method: 'GET',
                success: function (data) {
                    let nonce1 = data.last_code;
                    console.log('noncebefore:', nonce1);

                    var commodityCode = $("#commodityCode").val();
                    var category = $("#category").val();
                    var subject = $("#subject").val();
                    var classmen = $("#classmen").val();
                    var growthEnvironment = $("#growthEnvironment").val();
                    var growthCycle = $("#growthCycle").val();
                    var growthManagement = $("#growthManagement").val();
                    var harvestTime = $("#cztime").val();
                    var harvestMethod = $("#harvestMethod").val();
                    var storageMethod = $("#storageMethod").val();
                    var transportDistance = $("#transportDistance").val();
                    var transportTool = $("#transportTool").val();
                    var transportStartTime = $("#kstime").val();
                    var transportEndTime = $("#jstime").val();
                    var preservationTime = $("#bxtime").val();
                    var salesMethod = $("#salesMethod").val();
                    var processingMethod = $("#processingMethod").val();
                    var shelfTime = $("#sjtime").val();
                    var dishName = $("#dishName").val();

                    console.log('commodityCode:', commodityCode);
                    console.log('category:', category);
                    console.log('subject:', subject);
                    console.log('classmen:', classmen);
                    console.log('growthEnvironment:', growthEnvironment);
                    console.log('growthCycle:', growthCycle);
                    console.log('growthManagement:', growthManagement);
                    console.log('harvestTime:', harvestTime);
                    console.log('harvestMethod:', harvestMethod);
                    console.log('storageMethod:', storageMethod);
                    console.log('transportDistance:', transportDistance);
                    console.log('transportTool:', transportTool);
                    console.log('transportStartTime:', transportStartTime);
                    console.log('transportEndTime:', transportEndTime);
                    console.log('preservationTime:', preservationTime);
                    console.log('salesMethod:', salesMethod);
                    console.log('processingMethod:', processingMethod);
                    console.log('shelfTime:', shelfTime);
                    console.log('dishName:', dishName);

                    let transaction = contractInstance.methods.addPlanting(
                        commodityCode,
                        category,
                        subject,
                        classmen,
                        growthEnvironment,
                        growthCycle,
                        growthManagement,
                        harvestTime,
                        harvestMethod,
                        storageMethod,
                        transportDistance,
                        transportTool,
                        transportStartTime,
                        transportEndTime,
                        preservationTime,
                        salesMethod,
                        processingMethod,
                        shelfTime,
                        dishName
                    ).encodeABI();

                    let account = '0x877D1E76FAD0EA72263583C147CE8f92f4BF27F5';
                    console.log('nonceafter:', nonce1);

                    let privateKey = 'c56286692110e5321e4b060d32d55b8516ae21562e222425926b3613f9d242b3'; // Replace with your private key

                    if (!account) {
                        console.error('Account is not defined');
                        return;
                    }
                    web3.eth.getTransactionCount(account)
                        .then(nonce => {
                            console.log('Nonce: ', nonce1);  // Log the nonce

                            let rawTransaction = {
                                from: account,
                                to: contractInstance.options.address,
                                data: transaction,
                                gas: 2000000,
                                gasPrice: web3.utils.toWei('20', 'gwei'), // 20 Gwei
                                nonce: nonce1  // Use nonce1 here
                            };

                            console.log('Raw transaction: ', rawTransaction);  // Log the raw transaction

                            return web3.eth.accounts.signTransaction(rawTransaction, privateKey);
                        })
                        .then(signedTx => {
                            console.log('Signed transaction: ', signedTx);  // Log the signed transaction

                            return web3.eth.sendSignedTransaction(signedTx.rawTransaction);
                        })
                        .then(receipt => {
                            console.log('Transaction receipt: ', receipt);  // Log the transaction receipt
                        })
                        .catch(err => {
                            console.error('Error sending transaction: ', err);  // Log the error
                        });

                    console.log(error);
                }
            });
        };



        // Get the number from the input field
        // Retrieve values from the form
        /*var commodityCode = $("#commodityCode").val();
        var category = $("#category").val();
        var subject = $("#subject").val();
        var classmen = $("#classmen").val();
        var growthEnvironment = $("#growthEnvironment").val();
        var growthCycle = $("#growthCycle").val();
        var growthManagement = $("#growthManagement").val();
        var harvestTime = $("#cztime").val();
        var harvestMethod = $("#harvestMethod").val();
        var storageMethod = $("#storageMethod").val();
        var transportDistance = $("#transportDistance").val();
        var transportTool = $("#transportTool").val();
        var transportStartTime = $("#kstime").val();
        var transportEndTime = $("#jstime").val();
        var preservationTime = $("#bxtime").val();
        var salesMethod = $("#salesMethod").val();
        var processingMethod = $("#processingMethod").val();
        var shelfTime = $("#sjtime").val();
        var dishName = $("#dishName").val();
        console.log('commodityCode:', commodityCode);
        console.log('category:', category);
        console.log('subject:', subject);
        console.log('classmen:', classmen);
        console.log('growthEnvironment:', growthEnvironment);
        console.log('growthCycle:', growthCycle);
        console.log('growthManagement:', growthManagement);
        console.log('harvestTime:', harvestTime);
        console.log('harvestMethod:', harvestMethod);
        console.log('storageMethod:', storageMethod);
        console.log('transportDistance:', transportDistance);
        console.log('transportTool:', transportTool);
        console.log('transportStartTime:', transportStartTime);
        console.log('transportEndTime:', transportEndTime);
        console.log('preservationTime:', preservationTime);
        console.log('salesMethod:', salesMethod);
        console.log('processingMethod:', processingMethod);
        console.log('shelfTime:', shelfTime);
        console.log('dishName:', dishName);*/

        //2
        /*var harvestTime = $("#harvestTime2").val();
        var harvestMethod = $("#harvestMethod2").val();
        var storageMethod = $("#storageMethod2").val();
        var transportDistance = $("#transportDistance2").val();
        var transportTool = $("#transportTool2").val();
        var transportStartTime = $("#transportStartTime2").val();
        var transportEndTime = $("#transportEndTime2").val();
        var preservationTime = $("#preservationTime2").val();
        var salesMethod = $("#salesMethod2").val();*/


        // Use the number as the argument for the store function
        /*let transaction = contractInstance.methods.addPlanting(
            commodityCode,
            category,
            subject,
            classmen,
            growthEnvironment,
            growthCycle,
            growthManagement,
            harvestTime,
            harvestMethod,
            storageMethod,
            transportDistance,
            transportTool,
            transportStartTime,
            transportEndTime,
            preservationTime,
            salesMethod,
            processingMethod,
            shelfTime,
            dishName
        ).encodeABI();
        let account = '0x877D1E76FAD0EA72263583C147CE8f92f4BF27F5';
        var nonce1 = "{{ noncecode.code }}";
        console.log('nonceaf:', nonce1);
        let privateKey = 'c56286692110e5321e4b060d32d55b8516ae21562e222425926b3613f9d242b3'; // Replace with your private key

        if (!account) {
            console.error('Account is not defined');
            return;
        }

        web3.eth.getTransactionCount(account)
            .then(nonce => {
                let rawTransaction = {
                    from: account,
                    to: contractInstance.options.address,
                    data: transaction,
                    gas: 2000000,
                    gasPrice: web3.utils.toWei('20', 'gwei'), // 20 Gwei
                    nonce: 54
                };

                return web3.eth.accounts.signTransaction(rawTransaction, privateKey);
            })
            .then(signedTx => web3.eth.sendSignedTransaction(signedTx.rawTransaction))
            .then(receipt => console.log('Transaction receipt: ', receipt))
            .catch(err => console.error('Error sending transaction: ', err));*/



        /*let transaction2 = contractInstance.methods.addPlanting2(
            commodityCode,
            harvestTime,
            harvestMethod,
            storageMethod,
            transportDistance,
            transportTool,
            transportStartTime,
            transportEndTime,
            preservationTime,
            salesMethod
        ).encodeABI();
 
 
        web3.eth.getTransactionCount(account)
            .then(nonce => {
                let rawTransaction = {
                    from: account,
                    to: contractInstance.options.address,
                    data: transaction2,
                    gas: 2000000,
                    gasPrice: web3.utils.toWei('20', 'gwei'), // 20 Gwei
                    nonce: 34
                };
 
                return web3.eth.accounts.signTransaction(rawTransaction, privateKey);
            })
            .then(signedTx => web3.eth.sendSignedTransaction(signedTx.rawTransaction))
            .then(receipt => console.log('Transaction receipt: ', receipt))
            .catch(err => console.error('Error sending transaction: ', err));
 
 
    }*/



        /*
        let transaction = contractInstance.methods.store(123).encodeABI();
 
        web3.eth.getTransactionCount(account)
            .then(nonce => {
                let rawTransaction = {
                    from: account,
                    to: contractInstance.options.address,
                    data: transaction,
                    gas: 2000000,
                    gasPrice: web3.utils.toWei('20', 'gwei'), // 20 Gwei
                    nonce: 21
                };
 
                return web3.eth.accounts.signTransaction(rawTransaction, privateKey);
            })
            .then(signedTx => web3.eth.sendSignedTransaction(signedTx.rawTransaction))
            .then(receipt => console.log('Transaction receipt: ', receipt))
            .catch(err => console.error('Error sending transaction: ', err));*/




        /*let rawTransaction = {
            from: account,
            to: contractInstance.options.address,
            data: transaction,
            gas: 2000000,
            gasPrice: web3.utils.toWei('20', 'gwei') // 20 Gwei
 
 
        };
 
        web3.eth.accounts.signTransaction(rawTransaction, privateKey)
            .then(signedTx => web3.eth.sendSignedTransaction(signedTx.rawTransaction))
            .then(receipt => console.log('Transaction receipt: ', receipt))
            .catch(err => console.error('Error sending transaction: ', err));*/




        /*contractInstance.methods.store(123).send({ from: '0x82C07955eD5f47F31B946DC506EF5885a17dD3Cc' }).then(function (result) {
            console.log("***store(123)***:");
            console.log(result);
        });*/

        /*contractInstance.methods.retrievetext().call().then(function (result) {
            document.getElementById("demo").innerHTML = result;
        })*/


</script>


<script src="../static/plugins/jquery/jquery-3.5.1.min.js"></script>
<script src="../static/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../static/plugins/jarallax/jarallax.min.js"></script>
<script src="../static/plugins/jquery-ajaxchimp/jquery.ajaxchimp.min.js"></script>
<script src="../static/plugins/jquery-appear/jquery.appear.min.js"></script>
<script src="../static/plugins/jquery-circle-progress/jquery.circle-progress.min.js"></script>
<script src="../static/plugins/jquery-magnific-popup/jquery.magnific-popup.min.js"></script>
<script src="../static/plugins/jquery-validate/jquery.validate.min.js"></script>
<script src="../static/plugins/nouislider/nouislider.min.js"></script>
<script src="../static/plugins/odometer/odometer.min.js"></script>
<script src="../static/plugins/swiper/swiper.min.js"></script>
<script src="../static/plugins/tiny-slider/tiny-slider.min.js"></script>
<script src="../static/plugins/wnumb/wNumb.min.js"></script>
<script src="../static/plugins/wow/wow.js"></script>
<script src="../static/plugins/isotope/isotope.js"></script>
<script src="../static/plugins/countdown/countdown.min.js"></script>
<script src="../static/plugins/owl-carousel/owl.carousel.min.js"></script>
<script src="../static/plugins/twentytwenty/twentytwenty.js"></script>
<script src="../static/plugins/twentytwenty/jquery.event.move.js"></script>
<script src="../static/plugins/parallax/parallax.min.js"></script>
<script src="../static/plugins/tilt.js/tilt.jquery.js"></script>
<script type="text/javascript" src="../static/picker/citydata.js"></script>
<script type="text/javascript" src="../static/picker/cityPicker-1.0.0.js?v=1"></script>
<script type="text/javascript" src="../static/picker/bootstrap-datetimepicker.min.js"></script>
<script type="text/javascript" src="../static/picker/bootstrap-datetimepicker.zh-CN.js"></script>
<script type="text/javascript" src="../static/picker/time-address.js"></script>
<script src="https://ditu.google.cn/maps/api/js?key=AIzaSyATY4Rxc8jNvDpsK8ZetC7JyN4PFVYGCGM"></script>

<!-- template js -->
<script src="../static/js/agriox.js"></script>


</body>

</html>